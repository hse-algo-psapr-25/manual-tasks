# **Паросочетания. Венгерский алгоритм. Вариант 2**

## **Матрица затрат:**

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   9   |   8   |   7   |   14  |   14  |
| **B** |  13   |   13  |  14   |   6   |  12   |
| **C** |   7   |   8   |   9   |   6   |   7   |
| **D** |   8   |   9   |   7   |   9   |   5   |
| **E** |   9   |   9   |  14   |   7   |   5   |
---
## **Решение**

**Делаем редукцию матрицы, поэтому вычитаем минимальный элемент из каждой строки**

|       | **1** | **2** | **3** | **4** | **5** |       |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|   
| **A** |   9   |   8   |   7   |  14   |  14   |  -7   |
| **B** |  13   |  13   |  14   |   6   |  12   |  -6   |
| **C** |   7   |   8   |   9   |   6   |   7   |  -6   |
| **D** |   8   |   9   |   7   |   9   |   5   |  -5   |
| **E** |   9   |   9   |  14   |   7   |   5   |  -5   |

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   2   |   1   |   0   |   7   |   7   |
| **B** |   7   |   7   |   8   |   0   |   6   |
| **C** |   1   |   2   |   3   |   0   |   1   |
| **D** |   3   |   4   |   2   |   4   |   0   |
| **E** |   4   |   4   |   9   |   2   |   0   |
---
**Так как не в каждом столбце есть 0, вычитаем минимальный элемент из столбцов, где нету 0**

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   2   |   1   |   0   |   7   |   7   |
| **B** |   7   |   7   |   8   |   0   |   6   |
| **C** |   1   |   2   |   3   |   0   |   1   |
| **D** |   3   |   4   |   2   |   4   |   0   |
| **E** |   4   |   4   |   9   |   2   |   0   |
|       |  -1   |  -1   |       |       |       |

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   1   |   0   |  0    |   7   |   7   |
| **B** |   6   |   6   |  8    |   0   |   6   |
| **C** |   0   |   1   |  3    |   0   |   1   |
| **D** |   2   |   3   |  2    |   4   |   0   |
| **E** |   3   |   3   |  9    |   2   |   0   |
---
**Уже из этой матрницы можно сделать граф**

```mermaid
graph LR
    subgraph "Доля 1"
        A((A))
        B((B))
        C((C))
        D((D))
        E((E))
    end
    subgraph "Доля 2"
        1((1))
        2((2))
        3((3))
        4((4))
        5((5))
    end
    A --- 2
    A --- 3
    B --- 4
    C --- 1
    C --- 4
    D --- 5
    E --- 5
```
**Выберем произвольное паросочетание [A, 2], [B, 4], [C, 1], [D, 5] и попытаемся построить дерево из непокрытой вершины E:**

```mermaid
graph LR
    subgraph "Доля 1"
        A((A))
        B((B))
        C((C))
        D((D))
        E((E))
    end
    subgraph "Доля 2"
        1((1))
        2((2))
        3((3))
        4((4))
        5((5))
    end
    A --- 2
    A --- 3
    B --- 4
    C --- 1
    C --- 4
    D --- 5
    E --- 5

    style A fill:#008000
    style B fill:#008000
    style C fill:#008000
    style D fill:#008000
    style 2 fill:#008000
    style 4 fill:#008000
    style 1 fill:#008000
    style 5 fill:#008000
```
---
```mermaid
graph LR
    subgraph "0 фр." 
        E((E))
    end
    subgraph "1 фр." 
        5((5))
    end
    subgraph "2 фр." 
        D((D))
    end
    E --- 5
    5 === D
```

**В построенном дереве нет цепей, чередующееся относительно текущего паросочетания, ветка закончилась в покрытой вершине, то есть в указанном графе нет совершенного паросочетания. Поэтому будем проводить повторную редукцию по строках E,D и столбца 5. Ищем минимальный элемент кроме столбца 5 и туда же добавим минимальный элемент, чтобы не получились отрицательные числа**

|       | **1** | **2** | **3** | **4** | **5** |
|-------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **A** |   1   |   0   |  0    |   7   |   7   |
| **B** |   6   |   6   |  8    |   0   |   6   |
| **C** |   0   |   1   |  3    |   0   |   1   |
| **D** |   0   |   1   |  0    |   2   |   0   |
| **E** |   1   |   1   |  7    |   0   |   0   |

**И получаем новый в граф с ребрами:**

```mermaid
graph LR
    subgraph "Доля 1"
        A((A))
        B((B))
        C((C))
        D((D))
        E((E))
    end
    subgraph "Доля 2"
        1((1))
        2((2))
        3((3))
        4((4))
        5((5))
    end
    A === 2
    A --- 3
    B === 4
    C === 1
    C --- 4
    D --- 1
    D --- 3
    D --- 5
    E --- 4
    E --- 5

    style A fill:#008000
    style B fill:#008000
    style C fill:#008000
    style D fill:#008000
    style 2 fill:#008000
    style 4 fill:#008000
    style 1 fill:#008000
    style 5 fill:#008000
```
**Проверим**

```mermaid
graph LR
    subgraph "0 фр." 
        E((E))
    end
    subgraph "1 фр." 
        4((4))
        5((5))
    end
    subgraph "2 фр." 
        B((B))
        D((D))
    end
    subgraph "3 фр." 
        1((1))
        3((3))
    end
    subgraph "4 фр." 
        C((C))
    end

    E --- 4
    E --- 5
    4 === B
    5 === D
    D --- 1
    D --- 3
    1 === C

    style 4 fill:#008000
    style B fill:#008000
    style D fill:#008000
    style 5 fill:#008000
    style 1 fill:#008000
    style C fill:#008000
```
**В полученом графе существует цепь**

```mermaid
graph LR
    E((E))
    D((D))
    3((3))

    E --- 5
    5 === D
    D --- 3
```
**Перекрасим**
```mermaid
graph LR
    E((E))
    D((D))
    3((3))

    E === 5
    5 --- D
    D === 3
```
---
**Получаем итоговый вариант графа**

```mermaid
graph LR
    subgraph "" 
        A((A))
        B((B))
        C((C))
        D((D))
        E((E))
    end
    subgraph "" 
        1((1))
        2((2))
        3((3))
        4((4))
        5((5))
    end
    A === 2
    B === 4
    C === 1
    D === 3
    E === 5
    D --- 1
    D --- 5
    E --- 4
    A --- 3
    C --- 4

    style A fill:#008000
    style B fill:#008000
    style C fill:#008000
    style D fill:#008000
    style E fill:#008000
    style 2 fill:#008000
    style 4 fill:#008000
    style 1 fill:#008000
    style 3 fill:#008000
    style 5 fill:#008000
```
```mermaid
graph LR
    subgraph "" 
        A((A))
        B((B))
        C((C))
        D((D))
        E((E))
    end
    subgraph "" 
        1((1))
        2((2))
        3((3))
        4((4))
        5((5))
    end
    A === 2
    B === 4
    C === 1
    D === 3
    E === 5

    style A fill:#008000
    style B fill:#008000
    style C fill:#008000
    style D fill:#008000
    style E fill:#008000
    style 2 fill:#008000
    style 4 fill:#008000
    style 1 fill:#008000
    style 3 fill:#008000
    style 5 fill:#008000
```

Рассчитаем общую стоимость затрат (значения взяты из исходной матрицы):

A2 = 8\
B4 = 6\
C1 = 7\
D3 = 7\
E5 = 5

Общая стоимость затрат: 8 + 6 + 7 + 7 + 5 = 33
Ответ:

Минимальная стоимость затрат - 33, при следующем распределении исполнителей:
- Исполнитель A - задача 2
- Исполнитель B - задача 4
- Исполнитель C - задача 1
- Исполнитель D - задача 3
- Исполнитель E - задача 5