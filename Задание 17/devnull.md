# Задание №17
# Задача о максимальном потоке минимальной стоимости.
Для каждого варианта представлены условия задачи, в соответствии с которыми необходимо: 
1. Построить сеть с указанием пропускной способности дуг.
2. Построить остаточную сеть.
3. Определить максимальный поток методом поиска увеличивающих путей в остаточной сети (**строго** так, как было разобрано на занятиях).
4. Минимизировать стоимость максимального потока посредством поиска циклов отрицательной стоимости (**решение необходимо построить так, чтобы найти и обработать как минимум один цикл отрицательной стоимости**).
5. Оформить решение задачи по шагам с подробными комментариями, таблицами и диаграммами.
6. В ответе указать максимальную величину потока, минимальную стоимость транспортировки и сеть с указанием соответствующих локальных потоков.

### Вариант 5:
#### Пропускная способность дуг сети p(e) и стоимость транспортировки  единицы потока c(e):

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |


### 1. Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг для поиска максимального потока.

<img width="573" height="292" alt="image" src="https://github.com/user-attachments/assets/89873be3-ad2b-4536-b3ec-2849ad166c93" />

Укажем начальный поток величиной 6 **s -> a -> d -> t**. 

<img width="672" height="331" alt="image" src="https://github.com/user-attachments/assets/f9126523-31d2-4258-a995-6ed51fdcf4e7" />

Построим соответствующую остаточную сеть.

<img width="638" height="357" alt="image" src="https://github.com/user-attachments/assets/d268047e-3f3b-4d08-b871-0bd7408c7dbc" />

### 2. Проведем поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> b -> s. Минимальный вес дуг на этом пути равен 6.

<img width="712" height="400" alt="image" src="https://github.com/user-attachments/assets/322425fa-c767-4b11-869b-1f42b74f0d7b" />

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

<img width="724" height="416" alt="image" src="https://github.com/user-attachments/assets/acb1fb5b-8ca2-4856-82e5-982bca8da94d" />

<img width="717" height="372" alt="image" src="https://github.com/user-attachments/assets/40e36a0f-2e12-4ffe-9ac5-3869e5d7c8ca" />

### 3. Продолжим поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> c -> b -> s. Минимальный вес дуг на этом пути равен 3.

<img width="724" height="428" alt="image" src="https://github.com/user-attachments/assets/84be91dd-7b86-4d8c-a317-cb4457e1cfed" />

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

<img width="729" height="421" alt="image" src="https://github.com/user-attachments/assets/e32d9445-ecc1-4253-80f2-772e5e34313a" />

### 4. Продолжим поиск увеличивающего пути в остаточной сети

В остаточной сети не найдено увеличивающих путей, следовательно, алгоритм завершил работу и найденный поток величиной 15 является максимальным для данной сети.

<img width="701" height="368" alt="image" src="https://github.com/user-attachments/assets/88d45100-b0b8-4f9b-b046-fb70a189b32e" />

### 5. Рассчитаем стоимость полученного максимального потока.

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |       |        
| Локальный поток f(e)                          | 6  | 9  | 0  | 6  | 0  | 3  | 6  | 15 | 3  |       |     
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |       |
| Суммарная стоимость f(e)*c(e)                 | 6  | 9  | 0  | 18 | 0  | 15 | 42 | 15 | 3  | 108   | 

Стоимость полученного потока составляет 108. 

### 6. Попробуем уменьшить стоимость потока для чего построим остаточную сеть.
Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока.

<img width="709" height="430" alt="image" src="https://github.com/user-attachments/assets/271ebab4-25b4-41b3-8f32-b25963bfe17a" />

В остаточной сети найден ориентированный цикл отрицательной стоимости d -> c -> b -> d (5 + 1 - 7 = -1). 

<img width="732" height="430" alt="image" src="https://github.com/user-attachments/assets/3225662a-01fe-47c9-aeec-4eabc8c484ba" />

Найдем минимальный вес ребра в указанном цикле, изображенном **в остаточной сети с указанием величины потока**.  

<img width="735" height="434" alt="image" src="https://github.com/user-attachments/assets/ef2b7166-886b-4ecd-aed5-c4ebe452687e" />

Минимальный вес ребра в цикле 2 

Удалим найденный цикл - уменьшим на 2 вес всех ребер, входящих в цикл.

Скорректируем остаточную сеть с указанием стоимости транспортировки единицы потока.

<img width="714" height="448" alt="image" src="https://github.com/user-attachments/assets/ed2187bb-1074-4288-9cc9-df4c533a16b8" />

<img width="757" height="470" alt="image" src="https://github.com/user-attachments/assets/bdf4ae71-3f25-4999-aff4-58ca8216f127" />

### 7. Проведем повторный поиск цикла отрицательной стоимости в остаточной сети.

В остаточной сети отсутствуют циклы отрицательной стоимости, следовательно, стоимость потока минимальна.

### 8. Рассчитаем стоимость полученного максимального потока.

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |       |        
| Локальный поток f(e)                          | 6  | 9  | 0  | 6  | 0  | 5  | 2  | 15 | 5  |       |     
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |       |
| Суммарная стоимость f(e)*c(e)                 | 6  | 9  | 0  | 18 | 0  | 25 | 14 | 15 | 5  | 92    | 

Стоимость полученного потока составляет 92. 

### Ответ:
Максимальный поток в сети равен 15, минимальная стоимость потока 92, она реализуется следующим локальными потоками:

<img width="772" height="408" alt="image" src="https://github.com/user-attachments/assets/54cc4d03-a527-4ed2-92ae-a5c2cfc713ec" />
