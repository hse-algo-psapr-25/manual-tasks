# Задание №17
# Задача о максимальном потоке минимальной стоимости.
Для каждого варианта представлены условия задачи, в соответствии с которыми необходимо: 
1. Построить сеть с указанием пропускной способности дуг.
2. Построить остаточную сеть.
3. Определить максимальный поток методом поиска увеличивающих путей в остаточной сети (**строго** так, как было разобрано на занятиях).
4. Минимизировать стоимость максимального потока посредством поиска циклов отрицательной стоимости (**решение необходимо построить так, чтобы найти и обработать как минимум один цикл отрицательной стоимости**).
5. Оформить решение задачи по шагам с подробными комментариями, таблицами и диаграммами.
6. В ответе указать максимальную величину потока, минимальную стоимость транспортировки и сеть с указанием соответствующих локальных потоков.

### Вариант 5:
#### Пропускная способность дуг сети p(e) и стоимость транспортировки  единицы потока c(e):

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |


### 1. Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг для поиска максимального потока.

<img width="975" height="539" alt="image" src="https://github.com/user-attachments/assets/59e33174-feec-4b9b-a325-bea3f822d6a4" />

Укажем начальный поток величиной 6 **s -> a -> d -> t**. 

<img width="846" height="450" alt="image" src="https://github.com/user-attachments/assets/ede3e301-cec6-422c-8412-9665d1a4881a" />

<img width="865" height="458" alt="image" src="https://github.com/user-attachments/assets/e559b2ce-125a-41fe-91a5-c4f5a0e452d4" />

Построим соответствующую остаточную сеть.

<img width="956" height="537" alt="image" src="https://github.com/user-attachments/assets/cddddf5e-fd5d-417c-954d-495cbca2724c" />

### 2. Проведем поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> b -> s. Минимальный вес дуг на этом пути равен 6.

<img width="952" height="526" alt="image" src="https://github.com/user-attachments/assets/b53cebf6-54c1-4d32-a63d-43419b4c7467" />

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

<img width="972" height="561" alt="image" src="https://github.com/user-attachments/assets/c7a212c4-f6dd-4d3a-bba3-a4531352e578" />

<img width="777" height="418" alt="image" src="https://github.com/user-attachments/assets/7c3a815c-6673-4a55-a50d-7cd5a44d2a23" />

### 3. Продолжим поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> c -> b -> s. Минимальный вес дуг на этом пути равен 3.

<img width="943" height="547" alt="image" src="https://github.com/user-attachments/assets/ad1645fc-be1f-4858-aaeb-dada8fcbf638" />

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

<img width="968" height="540" alt="image" src="https://github.com/user-attachments/assets/996eaad4-8ef7-458e-acc2-889a07c0a9ca" />

### 4. Продолжим поиск увеличивающего пути в остаточной сети

В остаточной сети не найдено увеличивающих путей, следовательно, алгоритм завершил работу и найденный поток величиной 15 является максимальным для данной сети.

<img width="746" height="395" alt="image" src="https://github.com/user-attachments/assets/ddf01de5-bb5d-48c9-aa1e-d12fd0b5a835" />

### 5. Рассчитаем стоимость полученного максимального потока.

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |       |        
| Локальный поток f(e)                          | 6  | 9  | 0  | 6  | 0  | 3  | 6  | 15 | 3  |       |     
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |       |
| Суммарная стоимость f(e)*c(e)                 | 6  | 9  | 0  | 18 | 0  | 15 | 42 | 15 | 3  | 108   | 

Стоимость полученного потока составляет 108. 

### 6. Попробуем уменьшить стоимость потока для чего построим остаточную сеть.
Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока.

<img width="940" height="563" alt="image" src="https://github.com/user-attachments/assets/0abf1fca-a7bb-4a84-9861-57f6802f2055" />

В остаточной сети найден ориентированный цикл отрицательной стоимости d -> c -> b -> d (5 + 1 - 7 = -1). 

<img width="871" height="506" alt="image" src="https://github.com/user-attachments/assets/da478546-37a6-4cf5-b039-2667aa6e2629" />

Найдем минимальный вес ребра в указанном цикле, изображенном **в остаточной сети с указанием величины потока**.  

<img width="882" height="495" alt="image" src="https://github.com/user-attachments/assets/21f5ad91-b445-46e7-9700-7029109110bd" />

Минимальный вес ребра в цикле 2 

Удалим найденный цикл - уменьшим на 2 вес всех ребер, входящих в цикл.

Скорректируем остаточную сеть с указанием стоимости транспортировки единицы потока.

<img width="860" height="525" alt="image" src="https://github.com/user-attachments/assets/24338747-6fb4-458f-af98-1b07185fa3d0" />

<img width="857" height="499" alt="image" src="https://github.com/user-attachments/assets/82f85c0a-f619-4101-8d1e-12c7106979c2" />

### 7. Проведем повторный поиск цикла отрицательной стоимости в остаточной сети.

В остаточной сети отсутствуют циклы отрицательной стоимости, следовательно, стоимость потока минимальна.

### 8. Рассчитаем стоимость полученного максимального потока.

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |       |        
| Локальный поток f(e)                          | 6  | 9  | 0  | 6  | 0  | 5  | 2  | 15 | 5  |       |     
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |       |
| Суммарная стоимость f(e)*c(e)                 | 6  | 9  | 0  | 18 | 0  | 25 | 14 | 15 | 5  | 92    | 

Стоимость полученного потока составляет 92. 

### Ответ:
Максимальный поток в сети равен 15, минимальная стоимость потока 92, она реализуется следующим локальными потоками:

<img width="772" height="408" alt="image" src="https://github.com/user-attachments/assets/54cc4d03-a527-4ed2-92ae-a5c2cfc713ec" />
