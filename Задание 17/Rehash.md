# Задание №17
# Задача о максимальном потоке минимальной стоимости.

## Постановка задачи
1. Дана сеть (взвешенный ориентированный граф) с источником s и стоком t.
2. Для каждой дуги определена пропускная способность и стоимость транспортировки.
3. Необходимо найти для указанной сети максимальный поток минимальной стоимости. 

### Вариант 6:
#### Пропускная способность дуг сети p(e) и стоимость транспортировки  единицы потока c(e):

| Дуги                                          | se | ea | ec | ed | ab | cb | dc | bt | ct | sd | dt |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность p(e)                   | 18 | 5  | 6  | 10 | 5  | 4  | 3  | 8  | 4  | 5  | 12 |
| Стоимость транспортировки единицы потока c(e) | 1  | 2  | 3  | 2  | 1  | 1  | 1  | 2  | 3  | 8  | 8  |

### 1. Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг для поиска максимального потока.

```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    e((e))
    t(((t)))

    s -->|18| e
    s -->|5| d
    e -->|5| a
    e -->|6| c
    e -->|10| d
    a -->|5| b
    c -->|4| b
    d -->|3| c
    b -->|8| t
    c -->|4| t
    d -->|12| t
```

### 2. Найдем максимальный поток

1.
```mermaid
graph RL
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    e((e))
    t(((t)))

    t -->|8| b
    b -->|5| a
    a -->|5| e
    e -->|18| s
    d -->|5| s
    c -->|6| e
    d -->|10| e
    b -->|4| c
    c -->|3| d
    t -->|4| c
    t -->|12| d
    
    linkStyle 0,1,2,3 stroke:red,stroke-width:2px
```

2.
```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    e((e))
    t(((t)))

    t -->|3| b
    b -->|4| c
    c -->|6| e
    e -->|13| s
    s -->|5| e
    d -->|5| s
    e -->|5| a
    d -->|10| e
    a -->|5| b
    c -->|3| d
    b -->|5| t
    t -->|4| c
    t -->|12| d
    linkStyle 0,1,2,3 stroke:red,stroke-width:2px
```

3.
```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    e((e))
    t(((t)))

    e -->|10| s
    t -->|4| c
    c -->|3| e
    s -->|8| e
    d -->|5| s
    e -->|5| a
    e -->|3| c
    d -->|10| e
    a -->|5| b
    b -->|1| c
    c -->|3| b
    c -->|3| d
    b -->|8| t
    t -->|12| d
    linkStyle 0,1,2 stroke:red,stroke-width:2px
```

4.
```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    e((e))
    t(((t)))

    t -->|1| c
    c -->|3| d
    d -->|10| e
    e -->|7| s
    e -->|6| c
    c -->|3| t
    s -->|11| e
    d -->|5| s
    e -->|5| a
    a -->|5| b
    b -->|1| c
    c -->|3| b
    b -->|8| t
    t -->|12| d
    linkStyle 0,1,2,3 stroke:red,stroke-width:2px
```

5.
```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    e((e))
    t(((t)))

    t -->|12| d
    d -->|9| e
    e -->|6| s
    c -->|2| d
    d -->|1| c
    e -->|1| d
    e -->|6| c
    c -->|4| t
    s -->|12| e
    d -->|5| s
    e -->|5| a
    a -->|5| b
    b -->|1| c
    c -->|3| b
    b -->|8| t
    linkStyle 0,1,2 stroke:red,stroke-width:2px
```

6.
```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    e((e))
    t(((t)))

    t -->|6| d
    d -->|5| s
    d -->|6| t
    d -->|3| e
    c -->|2| d
    d -->|1| c
    e -->|7| d
    e -->|6| c
    c -->|4| t
    s -->|18| e
    e -->|5| a
    a -->|5| b
    b -->|1| c
    c -->|3| b
    b -->|8| t
    linkStyle 0,1 stroke:red,stroke-width:2px
```

7.
```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    e((e))
    t(((t)))

    t -->|1| d
    s -->|5| d
    d -->|11| t
    d -->|3| e
    c -->|2| d
    d -->|1| c
    e -->|7| d
    e -->|6| c
    c -->|4| t
    s -->|18| e
    e -->|5| a
    a -->|5| b
    b -->|1| c
    c -->|3| b
    b -->|8| t
```

Увеличивающих путе больше нет, так что максимальный поток найден и равен F = 23

```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    e((e))
    t(((t)))

    s -->|18,18| e
    s -->|5,5| d
    e -->|5,5| a
    e -->|6,6| c
    e -->|7,10| d
    a -->|5,5| b
    c -->|3,4| b
    d -->|2,3| c
    b -->|8,8| t
    c -->|4,4| t
    d -->|11,12| t
```

### 3. Рассчитаем стоимость полученного максимального потока.

| Дуги                                          | se | ea | ec | ed | ab | cb | dc | bt | ct | sd | dt | Итого  |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:------:|
| Пропускная способность p(e)                   | 18 | 5  | 6  | 10 | 5  | 4  | 3  | 8  | 4  | 5  | 12 |        |
| Локальный поток f(e)                          | 18  | 5  | 6  | 7  | 5  | 3  | 2  | 8  | 4  | 5  | 11 |        |
| Стоимость транспортировки единицы потока c(e) | 1   | 2  | 3  | 2  | 1  | 1  | 1  | 2  | 3  | 8  | 8  |        |
| Суммарная стоимость f(e)*c(e)                 | 18 | 10 | 18  | 14  | 5 | 3  | 2  | 16  | 12  | 40  | 88  | **226** |

Стоимость полученного потока составляет 226. 
