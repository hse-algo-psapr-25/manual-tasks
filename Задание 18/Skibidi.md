# Задание №18
# Задача о рюкзаке. Метод ветвей и границ.
### Вариант 7:

| Предметы  |  A  | B  | C | D  | E |
|:----------|:---:|:--:|:-:|:--:|:-:|
| Стоимость |  5  | 3  | 8 | 12 | 9 |
| Вес       | 10  | 12 | 4 | 4  | 9 |

Ограничение вместимости: 21

## Шаг 1
Сортируем предметы по их ценности $(\frac {Стоимость}{вес})$

|    **Предметы**   | **D** | **C** | **E** | **A** | **B** |
|-------------------|:-----:|:-----:|:-----:|:-----:|:-----:|
| **Стоимость**     |   12  |   8   |   9   |   5   |   3   |
| **Вес**           |   4   |   4   |   9   |  10   |  12   |
| **Ценность**      |   3   |   2   |   1   |$\frac{1}{2}$|$\frac{1}{4}$|

## Шаг 2
Представим, что самого ценного предмета из тех, что еще не обработаны, у нас бесконечное количество и мы можем делить его на сколь угодно малые части. Тогда мы можем все оставшееся в рюкзаке место заполнить этим предметом. Тогда ценность будет

$$
3 * 21 = 63
$$

Это значение будет корнем нашего дерева, оно представляет оценку перспективности для задачи в целом.

## Шаг 3
Разобьем множество решений на два подмножества и начнем строить дерево. Левым потомком будет подмножество решений, в которых мы взяли самый ценный из оставшихся предметов, правым - где не взяли. 

Оценка перспективности левого потомка = 

$$
12 + 17 * 2 = 46 
$$

Оценка перспективности правого потомка = 

$$
21 * 2 = 42
$$


``` mermaid
flowchart TD
A(63)
B(46)
C(42)
A -- +D--> B
A -- -D--> C

style B fill:#4f4f
```

Повторяем шаг 3 и продолжаем строить дерево из самой перспективной вершины.

Оценка перспективности левого потомка = 

$$
12 + 8 + 13 * 1 = 33
$$

Оценка перспективности правого потомка = 

$$
12 + 1 * 17 = 29
$$


``` mermaid
flowchart TD
A(63)
B(46)
C(42)
D(33)
E(29)
A -- +D--> B
A -- -D--> C
B -- +C--> D
B -- -C--> E

style C fill:#4f4f
```
Заметим, что самая перспективная вершина оказалась на другой ветке. Продолжаем строить из вершины с оценкой 42.

Оценка перспективности левого потомка = 

$$
8 + 17 * 1 = 25
$$

Оценка перспективности правого потомка = 

$$
1 * 21 = 21
$$

``` mermaid
flowchart TD
A(63)
B(46)
C(42)
D(33)
E(29)
F(25)
G(21)
A -- +D--> B
A -- -D--> C
B -- +C--> D
B -- -C--> E
C -- +C--> F
C -- -C--> G

style D fill:#4f4f
```

Самая перспективная вершина - 33.

Оценка перспективности левого потомка = 

$$
12 + 8 + 9 + 4 * \frac{1}{2} = 31
$$

Оценка перспективности правого потомка = 

$$
12 + 8 + 13 * \frac{1}{2} = 26,5
$$

``` mermaid
flowchart TD
A(63)
B(46)
C(42)
D(33)
E(29)
F(25)
G(21)
H(31)
I(26,5)
A -- +D--> B
A -- -D--> C
B -- +C--> D
B -- -C--> E
C -- +C--> F
C -- -C--> G
D -- +E--> H
D -- -E--> I

style H fill:#4f4f
```

Самая перспективная вершина - 31.

Левый потомок не рассматривается, так как предмет A невозможно поместить в рюкзак.

Оценка перспективности правого потомка = 

$$
12 + 8 + 9 + 4 * \frac{1}{4}  = 30
$$

``` mermaid
flowchart TD
A(63)
B(46)
C(42)
D(33)
E(29)
F(25)
G(21)
H(31)
I(26,5)
J(X)
K(30)
A -- +D--> B
A -- -D--> C
B -- +C--> D
B -- -C--> E
C -- +C--> F
C -- -C--> G
D -- +E--> H
D -- -E--> I
H -- +A--> J
H -- -A--> K

style K fill:#4f4f
```

Самая перспективная вершина - 30.

Левый потомок не рассматривается, так как предмет B невозможно поместить в рюкзак.

Оценка перспективности правого потомка = 

$$
12 + 8 + 9 = 29
$$

``` mermaid
flowchart TD
A(63)
B(46)
C(42)
D(33)
E(29)
F(25)
G(21)
H(31)
I(26,5)
J(X)
K(30)
L(X)
M(29)
A -- +D--> B
A -- -D--> C
B -- +C--> D
B -- -C--> E
C -- +C--> F
C -- -C--> G
D -- +E--> H
D -- -E--> I
H -- +A--> J
H -- -A--> K
K -- +B--> L
K -- -B--> M

style M fill:#4f4f
```

## Ответ
В рюкзак пойдут предметы D, C, E. Максимальная стоимость рюкзака: 12 + 8 + 9 = 29.