# Задание №17
# Задача о максимальном потоке минимальной стоимости.
Для каждого варианта представлены условия задачи, в соответствии с которыми необходимо: 
1. Построить сеть с указанием пропускной способности дуг.
2. Построить остаточную сеть.
3. Определить максимальный поток методом поиска увеличивающих путей в остаточной сети (**строго** так, как было разобрано на занятиях).
4. Минимизировать стоимость максимального потока посредством поиска циклов отрицательной стоимости (**решение необходимо построить так, чтобы найти и обработать как минимум один цикл отрицательной стоимости**).
5. Оформить решение задачи по шагам с подробными комментариями, таблицами и диаграммами.
6. В ответе указать максимальную величину потока, минимальную стоимость транспортировки и сеть с указанием соответствующих локальных потоков.

### Вариант 5:
#### Пропускная способность дуг сети p(e) и стоимость транспортировки  единицы потока c(e):

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |


### 1. Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг для поиска максимального потока.

<img width="975" height="539" alt="image" src="https://github.com/user-attachments/assets/59e33174-feec-4b9b-a325-bea3f822d6a4" />

Укажем начальный поток величиной 6 **s -> a -> d -> t**. 

<img width="846" height="450" alt="image" src="https://github.com/user-attachments/assets/ede3e301-cec6-422c-8412-9665d1a4881a" />

<img width="865" height="458" alt="image" src="https://github.com/user-attachments/assets/e559b2ce-125a-41fe-91a5-c4f5a0e452d4" />

Построим соответствующую остаточную сеть.

<img width="893" height="487" alt="image" src="https://github.com/user-attachments/assets/92bc9be0-1aad-4b31-8c44-07ebe308b46a" />

### 2. Проведем поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> b -> s. Минимальный вес дуг на этом пути равен 6.

<img width="772" height="429" alt="image" src="https://github.com/user-attachments/assets/13b85fc8-6cfb-4cc9-a821-d51dde4488cb" />

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

<img width="812" height="473" alt="image" src="https://github.com/user-attachments/assets/e4a5b9bf-7928-45ee-8d11-856e76dd2adc" />

<img width="777" height="418" alt="image" src="https://github.com/user-attachments/assets/7c3a815c-6673-4a55-a50d-7cd5a44d2a23" />

### 3. Продолжим поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> c -> b -> s. Минимальный вес дуг на этом пути равен 3.

<img width="775" height="456" alt="image" src="https://github.com/user-attachments/assets/c40878d2-08e5-43ad-92b7-730775e50078" />

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

<img width="804" height="472" alt="image" src="https://github.com/user-attachments/assets/1628d3a0-be5b-4ee9-a209-779f02314baf" />

### 4. Продолжим поиск увеличивающего пути в остаточной сети

В остаточной сети не найдено увеличивающих путей, следовательно, алгоритм завершил работу и найденный поток величиной 15 является максимальным для данной сети.

<img width="746" height="395" alt="image" src="https://github.com/user-attachments/assets/ddf01de5-bb5d-48c9-aa1e-d12fd0b5a835" />

### 5. Рассчитаем стоимость полученного максимального потока.

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |       |        
| Локальный поток f(e)                          | 6  | 9  | 0  | 6  | 0  | 3  | 6  | 15 | 3  |       |     
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |       |
| Суммарная стоимость f(e)*c(e)                 | 6  | 9  | 0  | 18 | 0  | 15 | 42 | 15 | 3  | 108   | 

Стоимость полученного потока составляет 108. 

### 6. Попробуем уменьшить стоимость потока для чего построим остаточную сеть.
Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока.

<img width="790" height="463" alt="image" src="https://github.com/user-attachments/assets/72fc5d84-6ed4-4825-8037-11889974d4a3" />

В остаточной сети найден ориентированный цикл отрицательной стоимости d -> c -> b -> d (5 + 1 - 7 = -1). 

<img width="768" height="454" alt="image" src="https://github.com/user-attachments/assets/24611757-ff4f-4bbb-a41f-e582042b744f" />

Найдем минимальный вес ребра в указанном цикле, изображенном **в остаточной сети с указанием величины потока**.  

<img width="621" height="372" alt="image" src="https://github.com/user-attachments/assets/d6828821-6f11-4555-a5c5-ee458711d8be" />

Минимальный вес ребра в цикле 2 

Удалим найденный цикл - уменьшим на 2 вес всех ребер, входящих в цикл.

Скорректируем остаточную сеть с указанием стоимости транспортировки единицы потока.

<img width="751" height="451" alt="image" src="https://github.com/user-attachments/assets/3e115973-b831-40d6-9629-ab2b8a62c57a" />

<img width="747" height="473" alt="image" src="https://github.com/user-attachments/assets/b21de0bf-0488-4a3f-a891-dd134afc585d" />

### 7. Проведем повторный поиск цикла отрицательной стоимости в остаточной сети.

В остаточной сети отсутствуют циклы отрицательной стоимости, следовательно, стоимость потока минимальна.

### 8. Рассчитаем стоимость полученного максимального потока.

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |       |        
| Локальный поток f(e)                          | 6  | 9  | 0  | 6  | 0  | 5  | 2  | 15 | 5  |       |     
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |       |
| Суммарная стоимость f(e)*c(e)                 | 6  | 9  | 0  | 18 | 0  | 25 | 14 | 15 | 5  | 92    | 

Стоимость полученного потока составляет 92. 

### Ответ:
Максимальный поток в сети равен 15, минимальная стоимость потока 92, она реализуется следующим локальными потоками:

<img width="772" height="408" alt="image" src="https://github.com/user-attachments/assets/54cc4d03-a527-4ed2-92ae-a5c2cfc713ec" />
