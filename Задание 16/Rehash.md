# Задание №16
# Задача о максимальном потоке.
1. Дана сеть (взвешенный ориентированный граф) с источником s и стоком t.
2. Для каждой дуги определена ее пропускная способность.
3. Необходимо найти максимальный поток для указанной сети. 

### Вариант 9:
#### Пропускная способность дуг сети:

|          Дуги          | sa | ac | sd | ab | cb | dc | bt | ct | dt |
|:----------------------:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность | 10 | 6  | 7  | 5  | 4  | 3  | 8  | 4  | 5  |

### 1. Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг.

```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    t(((t)))

    s -->|10| a
    s -->|7| d
    a -->|6| c
    a -->|5| b
    d -->|3| c
    d -->|5| t
    c -->|4| b
    c -->|4| t
    b -->|8| t
```

Построим остаточную сеть. Так как изначально поток в сети не задан, все дуги сети являются пустыми (локальный поток равен нулю), соответственно в остаточную сеть необходимо вынести обратную дугу с весом равным пропускной способности.

```mermaid
graph RL
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    t(((t)))

    t -->|8| b
    t -->|4| c
    b -->|4| c
    t -->|5| d
    c -->|3| d
    b -->|5| a
    c -->|6| a
    d -->|7| s
    a -->|10| s

```
### 2. Проведем поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> s. Минимальный вес дуг на этом пути равен 5.

```mermaid
graph RL
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    t(((t)))

    t -->|8| b
    t -->|4| c
    b -->|4| c
    t -->|5| d
    c -->|3| d
    b -->|5| a
    c -->|6| a
    d -->|7| s
    a -->|10| s

    linkStyle 3,7 stroke:red,stroke-width:2px
```

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    t(((t)))

    b -->|4| c
    b -->|5| a
    d -->|5| t
    d -->|2| s
    c -->|3| d
    c -->|6| a
    s -->|5| d
    a -->|10| s
    t -->|8| b
    t -->|4| c
```

Скорректируем соответствующим образом локальные потоки в исходной сети. Первым числом будем указывать локальный поток, вторым пропускную способность дуги.

```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    t(((t)))

    t -->|5,8| b
    t -->|5,4| c
    b -->|0,4| c
    d -->|5,5| t
    c -->|3| d
    b -->|5| a
    c -->|6| a
    s -->|5,7| d
    a -->|10| s
```

3. Продолжим поиск увеличивающего пути в остаточной сети

```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    t(((t)))

    b -->|4| c
    b -->|5| a
    d -->|5| t
    d -->|2| s
    c -->|3| d
    c -->|6| a
    s -->|5| d
    a -->|10| s
    t -->|8| b
    t -->|4| c

    linkStyle 3,4,9 stroke:red,stroke-width:2px
```

В остаточной сети найден увеличивающий путь t -> c -> d -> s. Минимальный вес дуг на этом пути равен 2.

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    t(((t)))

    b -->|4| c
    b -->|5| a
    d -->|5| t
    c -->|1| d
    d -->|2| c
    c -->|6| a
    s -->|7| d
    a -->|10| s
    t -->|8| b
    t -->|2| c
    c -->|2| t
```

Скорректируем соответствующим образом локальные потоки в исходной сети.

```mermaid
graph LR
    s(((s)))
    a((a))
    b((b))
    c((c))
    d((d))
    t(((t)))

    t -->|8| b
    t -->|2,2| c
    b -->|4| c
    d -->|5,5| t
    c -->|1,3| d
    b -->|5| a
    c -->|6| a
    s -->|7,7| d
    a -->|10| s
```