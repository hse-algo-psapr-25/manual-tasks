# Задание №17
# Задача о максимальном потоке минимальной стоимости.
Для каждого варианта представлены условия задачи, в соответствии с которыми необходимо: 
1. Построить сеть с указанием пропускной способности дуг.
2. Построить остаточную сеть.
3. Определить максимальный поток методом поиска увеличивающих путей в остаточной сети (**строго** так, как было разобрано на занятиях).
4. Минимизировать стоимость максимального потока посредством поиска циклов отрицательной стоимости (**решение необходимо построить так, чтобы найти и обработать как минимум один цикл отрицательной стоимости**).
5. Оформить решение задачи по шагам с подробными комментариями, таблицами и диаграммами.
6. В ответе указать максимальную величину потока, минимальную стоимость транспортировки и сеть с указанием соответствующих локальных потоков.

### Вариант 5:
#### Пропускная способность дуг сети p(e) и стоимость транспортировки  единицы потока c(e):

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |


### 1. Построим сеть с источником **s**, стоком **t** и указанными пропускными способностями дуг для поиска максимального потока.

<img width="805" height="419" alt="image" src="https://github.com/user-attachments/assets/117aa0d8-513b-42af-acab-a7283510295a" />

Укажем начальный поток величиной 6 **s -> a -> d -> t**. 

<img width="799" height="448" alt="image" src="https://github.com/user-attachments/assets/13d80117-1162-43e5-901e-ea7dcb145e11" />

<img width="865" height="458" alt="image" src="https://github.com/user-attachments/assets/e559b2ce-125a-41fe-91a5-c4f5a0e452d4" />

Построим соответствующую остаточную сеть.

<img width="648" height="345" alt="image" src="https://github.com/user-attachments/assets/e3288d77-d284-42d7-92ae-37e38474aefd" />

### 2. Проведем поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> b -> s. Минимальный вес дуг на этом пути равен 6.

<img width="769" height="459" alt="image" src="https://github.com/user-attachments/assets/3ac6af6d-7eee-42d8-acff-a4271b7174d3" />

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

<img width="781" height="451" alt="image" src="https://github.com/user-attachments/assets/6da34b86-01f1-42dc-a6e5-f47a2b816dc5" />

<img width="777" height="418" alt="image" src="https://github.com/user-attachments/assets/7c3a815c-6673-4a55-a50d-7cd5a44d2a23" />

### 3. Продолжим поиск увеличивающего пути в остаточной сети
В остаточной сети найден увеличивающий путь t -> d -> c -> b -> s. Минимальный вес дуг на этом пути равен 3.

<img width="943" height="547" alt="image" src="https://github.com/user-attachments/assets/ad1645fc-be1f-4858-aaeb-dada8fcbf638" />

Уменьшим вес дуг на найденном пути, дуги для которых вес стал нулевым удалим из остаточной сети.

<img width="968" height="540" alt="image" src="https://github.com/user-attachments/assets/996eaad4-8ef7-458e-acc2-889a07c0a9ca" />

### 4. Продолжим поиск увеличивающего пути в остаточной сети

В остаточной сети не найдено увеличивающих путей, следовательно, алгоритм завершил работу и найденный поток величиной 15 является максимальным для данной сети.

<img width="746" height="395" alt="image" src="https://github.com/user-attachments/assets/ddf01de5-bb5d-48c9-aa1e-d12fd0b5a835" />

### 5. Рассчитаем стоимость полученного максимального потока.

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |       |        
| Локальный поток f(e)                          | 6  | 9  | 0  | 6  | 0  | 3  | 6  | 15 | 3  |       |     
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |       |
| Суммарная стоимость f(e)*c(e)                 | 6  | 9  | 0  | 18 | 0  | 15 | 42 | 15 | 3  | 108   | 

Стоимость полученного потока составляет 108. 

### 6. Попробуем уменьшить стоимость потока для чего построим остаточную сеть.
Для каждого ребра остаточной сети укажем стоимость транспортировки единицы потока.

<img width="759" height="462" alt="image" src="https://github.com/user-attachments/assets/989d4f32-d3e6-4769-8426-886e5ccca9a1" />

В остаточной сети найден ориентированный цикл отрицательной стоимости d -> c -> b -> d (5 + 1 - 7 = -1). 

<img width="792" height="467" alt="image" src="https://github.com/user-attachments/assets/9e5b3f6d-51c5-4490-b8c2-5750f7de0110" />

Найдем минимальный вес ребра в указанном цикле, изображенном **в остаточной сети с указанием величины потока**.  

<img width="789" height="447" alt="image" src="https://github.com/user-attachments/assets/3b581e11-8b02-48a9-8209-1ac01615ea1b" />

Минимальный вес ребра в цикле 2 

Удалим найденный цикл - уменьшим на 2 вес всех ребер, входящих в цикл.

Скорректируем остаточную сеть с указанием стоимости транспортировки единицы потока.

<img width="801" height="480" alt="image" src="https://github.com/user-attachments/assets/5524cb4f-83ec-45bf-b7af-e43815eea361" />

<img width="773" height="462" alt="image" src="https://github.com/user-attachments/assets/7815dbd5-bbdf-433b-8a28-5053b580af82" />

### 7. Проведем повторный поиск цикла отрицательной стоимости в остаточной сети.

В остаточной сети отсутствуют циклы отрицательной стоимости, следовательно, стоимость потока минимальна.

### 8. Рассчитаем стоимость полученного максимального потока.

| Дуги                                          | sa | sb | ab | ad | ac | cd | bd | dt | bc | Итого |
|:----------------------------------------------|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:--:|:-----:|
| Пропускная способность p(e)                   | 10 | 10 | 6  | 6  | 6  | 12 | 6  | 15 | 5  |       |        
| Локальный поток f(e)                          | 6  | 9  | 0  | 6  | 0  | 5  | 2  | 15 | 5  |       |     
| Стоимость транспортировки единицы потока c(e) | 1  | 1  | 1  | 3  | 1  | 5  | 7  | 1  | 1  |       |
| Суммарная стоимость f(e)*c(e)                 | 6  | 9  | 0  | 18 | 0  | 25 | 14 | 15 | 5  | 92    | 

Стоимость полученного потока составляет 92. 

### Ответ:
Максимальный поток в сети равен 15, минимальная стоимость потока 92, она реализуется следующим локальными потоками:

<img width="772" height="408" alt="image" src="https://github.com/user-attachments/assets/54cc4d03-a527-4ed2-92ae-a5c2cfc713ec" />
